<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Azure Credentials Setup â€” Twin2Clouds Documentation</title>
    <link rel="icon" type="image/x-icon" href="references/favicon.ico">
    <meta name="viewport" content="width=device-width,initial-scale=1" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="css/docs_styles.css" />
</head>

<body>

    <div class="layout">
        <aside id="nav-placeholder"></aside>

        <main class="p-4">
            <h1 class="mb-3">
                <i class="fa-brands fa-microsoft me-2"></i> Azure Credentials Setup
            </h1>

            <p class="text-muted mb-4">
                Azure pricing data is publicly accessible - no authentication required!
            </p>

            <!-- Breadcrumb -->
            <nav aria-label="breadcrumb" class="mb-4">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="docs-credentials-setup.html">Credentials Setup</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Azure</li>
                </ol>
            </nav>

            <div class="card mb-4" id="overview">
                <div class="card-body">
                    <h2 class="mb-3"><i class="fa-solid fa-party-horn me-2"></i>No Setup Required!</h2>

                    <div class="callout success">
                        <strong><i class="fa-solid fa-check-circle me-2"></i>Azure Retail Prices API is Public</strong>
                        Unlike AWS and GCP, the Azure Retail Prices API (prices.azure.com) is completely public and
                        requires <strong>no authentication</strong>. You can start fetching Azure pricing data
                        immediately!
                    </div>

                    <p>The <a
                            href="https://learn.microsoft.com/en-us/rest/api/cost-management/retail-prices/azure-retail-prices"
                            target="_blank">Azure Retail Prices API</a> provides:</p>
                    <ul>
                        <li><strong>Real-time pricing</strong> for all Azure services</li>
                        <li><strong>Regional pricing</strong> for different Azure regions</li>
                        <li><strong>Currency conversion</strong> for multiple currencies</li>
                        <li><strong>Reservation pricing</strong> for 1-year and 3-year terms</li>
                    </ul>

                    <p class="mt-3">This means:</p>
                    <ul>
                        <li>No Service Principal required</li>
                        <li>No subscription needed to query prices</li>
                        <li>No secrets to manage</li>
                        <li>Works immediately without any configuration</li>
                    </ul>
                </div>
            </div>

            <div class="card mb-4" id="optional-config">
                <div class="card-body">
                    <h2 class="mb-3"><i class="fa-solid fa-gear me-2"></i>Optional Configuration</h2>

                    <p>While no credentials are required, you can optionally configure region preferences in
                        <code>config/config_credentials.json</code>:
                    </p>

                    <pre class="p-3 rounded"><code>{
  "azure": {
    "azure_subscription_id": "optional-for-reference-only",
    "azure_region": "westeurope"
  }
}</code></pre>

                    <table class="table table-sm mt-4">
                        <thead>
                            <tr>
                                <th>Field</th>
                                <th>Required</th>
                                <th>Purpose</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>azure_subscription_id</code></td>
                                <td><span class="badge bg-secondary">Optional</span></td>
                                <td>For reference only - not used for pricing API calls</td>
                            </tr>
                            <tr>
                                <td><code>azure_region</code></td>
                                <td><span class="badge bg-secondary">Optional</span></td>
                                <td>Default region for filtering prices (e.g., <code>westeurope</code>)</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="callout info mt-3">
                        <strong><i class="fa-solid fa-lightbulb me-2"></i>Format Validation</strong>
                        If you provide an <code>azure_subscription_id</code>, the credential checker will validate
                        that it's in the correct UUID format. This is purely for configuration consistency.
                    </div>
                </div>
            </div>

            <div class="card mb-4" id="verification">
                <div class="card-body">
                    <h2 class="mb-3"><i class="fa-solid fa-check-circle me-2"></i>Verification</h2>

                    <p>The credential checker will verify your Azure configuration:</p>
                    <pre class="p-3 rounded"><code># REST API
GET /permissions/verify/azure

# Or using cURL
curl http://localhost:5003/permissions/verify/azure</code></pre>

                    <h5 class="mt-4">Expected Response</h5>
                    <pre class="p-3 rounded"><code>{
  "provider": "azure",
  "status": "valid",
  "message": "Azure configuration is valid. Note: Pricing API is publicly accessible.",
  "config_present": true,
  "credentials_valid": true,
  "can_fetch_pricing": true,
  "identity": {
    "subscription_id": "your-subscription-id",
    "region": "westeurope"
  },
  "note": "Azure pricing API (prices.azure.com) is publicly accessible - no authentication required for pricing data"
}</code></pre>

                    <div class="callout info mt-3">
                        <strong><i class="fa-solid fa-circle-info me-2"></i>Note</strong>
                        The <code>can_fetch_pricing</code> field will always be <code>true</code> for Azure because
                        the pricing API is public. Configuration validation is purely for format checking.
                    </div>
                </div>
            </div>

            <div class="card mb-4" id="api-details">
                <div class="card-body">
                    <h2 class="mb-3"><i class="fa-solid fa-code me-2"></i>API Details</h2>

                    <p>For reference, the Optimizer fetches Azure pricing using:</p>

                    <pre class="p-3 rounded"><code># Example API call (no authentication headers needed)
GET https://prices.azure.com/api/retail/prices?$filter=serviceName eq 'Virtual Machines'</code></pre>

                    <h5 class="mt-4">Useful Resources</h5>
                    <ul>
                        <li><a href="https://learn.microsoft.com/en-us/rest/api/cost-management/retail-prices/azure-retail-prices"
                                target="_blank">Azure Retail Prices REST API Reference</a></li>
                        <li><a href="https://azure.microsoft.com/en-us/pricing/" target="_blank">Azure Pricing
                                Calculator</a></li>
                        <li><a href="https://prices.azure.com/api/retail/prices" target="_blank">Live API Endpoint (try
                                it
                                now!)</a></li>
                    </ul>
                </div>
            </div>

            <div class="card mb-4" id="comparison">
                <div class="card-body">
                    <h2 class="mb-3"><i class="fa-solid fa-scale-balanced me-2"></i>Comparison with Other Providers</h2>

                    <table class="table table-sm">
                        <thead>
                            <tr>
                                <th>Provider</th>
                                <th>API</th>
                                <th>Authentication</th>
                                <th>Setup Complexity</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><i class="fa-brands fa-aws me-1"></i> AWS</td>
                                <td>Price List API</td>
                                <td>IAM Access Keys + Policy</td>
                                <td><span class="badge bg-warning">Medium</span></td>
                            </tr>
                            <tr>
                                <td><i class="fa-brands fa-google me-1"></i> GCP</td>
                                <td>Cloud Billing Catalog</td>
                                <td>Service Account JSON</td>
                                <td><span class="badge bg-warning">Medium</span></td>
                            </tr>
                            <tr class="table-success">
                                <td><i class="fa-brands fa-microsoft me-1"></i> Azure</td>
                                <td>Retail Prices API</td>
                                <td><strong>None (Public)</strong></td>
                                <td><span class="badge bg-success">None</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </main>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <button id="backToTop" class="btn btn-primary rounded-circle position-fixed bottom-0 end-0 m-4 shadow fade p-3"
        style="display:none;">
        <i class="fa-solid fa-arrow-up"></i>
    </button>
    <script src="js/docs-nav.js" defer></script>
</body>

</html>