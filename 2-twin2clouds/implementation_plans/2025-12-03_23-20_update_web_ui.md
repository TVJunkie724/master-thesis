# Implementation Plan - Update Web UI (index.html)

**Goal**: Update `index.html` to include new calculation parameters, improve the layout with separators and descriptions, and ensure it aligns with the latest backend logic.

## User Review Required
> [!IMPORTANT]
> **PDF Content**: I will need the text from `EDT_25__CloudDT_engineering.pdf` for the layer descriptions if they are not fully covered by the existing documentation.

## Proposed Changes

### 1. HTML Structure & Layout (`index.html`)
*   **Header Description**: Add a description explaining the L1/L3 coupling: "Layer 1 (Ingestion) and Layer 3 (Processing) are grouped here because their costs are both driven by the same workload parameters: device count, message frequency, and message size."
*   **Layer 1/3 Section (Workload Parameters)**:
    *   Keep `numberOfDevices`, `interval`, `messageSize`.
*   **Layer 2 (Storage & Event Checking)**:
    *   **Add Description**: Explain that this layer handles data storage and initial event filtering.
    *   **New Fields**:
        *   Add Checkbox: `useEventChecking` ("Enable Event Checking?")
        *   Add Input: `eventsPerMessage` ("Events per Message")
        *   Add Checkbox: `returnFeedbackToDevice` ("Return Feedback to Device?")
    *   **Existing Fields**: Hot/Cool/Archive durations.
*   **Layer 3 (Orchestration)**:
    *   **Create New Section**: Separate from L1/L2.
    *   **Add Description**: Explain that this layer handles complex workflows and error management.
    *   **New Fields**:
        *   Add Checkbox: `triggerNotificationWorkflow` ("Trigger Notification Workflow?")
        *   Add Input: `orchestrationActionsPerMessage` ("Orchestration Actions per Message")
        *   Add Checkbox: `integrateErrorHandling` ("Integrate Error Handling?")
*   **Layer 5 (Visualization)**:
    *   Add Input: `apiCallsPerDashboardRefresh` ("API Calls per Dashboard Refresh")

### 2. JavaScript Logic (`js/api-client.js`)
*   **Update `readParamsFromUi()`**:
    *   Retrieve values from the new input fields (checkboxes and number inputs).
    *   Add these values to the `params` object sent to the API.
*   **Clarification**: The actual cost calculation logic resides in the Python backend (`backend/calculation/engine.py` and provider modules), which is called via the `/api/calculate` endpoint in `rest_api.py`. The JS code only handles gathering inputs and displaying results.

### 3. Styling (`css/styles.css`)
*   **Prettify**: Add CSS for the new separators and description text to ensure a clean, professional look.
*   **Tooltips**: Add tooltips or small help text below each field explaining its impact (e.g., "Increases L3 compute cost").

## Verification Plan

### Manual Verification
*   **UI Check**: Open `index.html` in the browser (via `read_browser_page` or manual user check).
*   **Calculation Check**: Click "Calculate Cost" and verify that the request payload includes the new fields and the backend returns a valid result.
*   **Visual Check**: Confirm that separators and descriptions are rendered correctly.
